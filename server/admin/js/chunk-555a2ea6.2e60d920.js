(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-555a2ea6"],{"0f60":function(e,t,a){"use strict";var s=a("da94"),i=a.n(s);i.a},"3f1f":function(e,t,a){"use strict";var s=a("e288"),i=a.n(s);i.a},"3f7a":function(e,t,a){"use strict";var s=a("8b49"),i=a.n(s);i.a},7424:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}]},[a("el-form",{attrs:{"label-width":"100px"}},[e._l(e.componentList,(function(t,s,i){return a(t,{key:i,tag:"component",attrs:{data:e.form[s]}})})),a("el-form-item",[a("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即保存")]),a("span",{staticClass:"hint"},[a("i",{staticClass:"el-icon-warning"}),e._v("信息需填写完整才能正常使用 ")])],1)],2)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":e.upload}},[e.url||e.newURL?a("img",{attrs:{src:e.newURL||e.url}}):a("i",{class:e.icon})])},r=[],o={name:"upload",props:{name:{type:String,default:""},icon:{type:String,default:"el-icon-plus"},url:{type:String,default:""}},data(){return{newURL:""}},methods:{upload(e){e.raw.type.includes("image")?(this.newURL=URL.createObjectURL(e.raw),this.$emit("change",this.name,e.raw)):this.$message.error("请选择图片格式的文件！")}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,null,null),p=u.exports,d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("h2",{staticClass:"tit hint-tit"},[e._v(" 首屏效果 "),s("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[s("p",[e._v("遮罩颜色请选择与图片相对应的色彩")]),s("img",{attrs:{src:a("f5a3")}}),s("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("(view)")])])],1),e._l(e.info,(function(t,a,i){return[s("el-form-item",{key:i,attrs:{label:t}},"image"==a?[s("Upload",{staticClass:"cover",attrs:{icon:"el-icon-picture",name:"cover"},on:{change:e.uploadChange}}),s("span",{staticClass:"upload-image-size"},[e._v("(1920*1080)")])]:"maskColor"!=a?[s("el-input")]:[s("el-color-picker",{key:i,attrs:{"show-alpha":""}})],1)]}))],2)},m=[],f={name:"CoverInfo",components:{Upload:p},data(){return{info:{image:"图片",title:"标题",describe:"描述",date:"时间",link:"链接",maskColor:"遮罩"}}},methods:{fileUploadType(e){return"adminAvatar"==e?"avatar":"cover"},uploadChange(){}}},h=f,v=(a("3f1f"),Object(c["a"])(h,d,m,!1,null,"4bc7dcd3",null)),g=v.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h2",{staticClass:"tit"},[e._v("页面音乐")]),e._l(e.list,(function(e,t,s){return[a("el-form-item",{key:s,attrs:{label:e}},[a("el-input")],1)]}))],2)},_=[],y={name:"BgMusic",data(){return{list:{mood:"文章列表",letter:"短语列表",subscribe:"订阅页面",message:"留言页面",about:"个人介绍"}}}},w=y,$=Object(c["a"])(w,b,_,!1,null,null,null),k=$.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h2",{staticClass:"tit"},[e._v("前台管理")]),e._l(e.list,(function(e,t,s){return[a("el-form-item",{key:s,attrs:{label:e}},[["name","email","mark","code"].includes(t)?a("el-input"):a("el-switch")],1)]}))],2)},L=[],U={name:"Website",data(){return{list:{email:"邮箱",name:"昵称",mark:"标识",code:"验证",comment:"评论通知",subscribe:"订阅通知",message:"留言页面"}}}},S=U,x=Object(c["a"])(S,C,L,!1,null,null,null),O=x.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[e._m(0),e._l(e.list,(function(t,s,i){return a("el-form-item",{key:i,attrs:{label:t}},["adminAvatar"==s?a("Upload",{staticClass:"avatar",attrs:{icon:"el-icon-user",name:"avatar",url:e.data["adminAvatar"]},on:{change:e.uploadChange}}):["fileUploadType","emailType"].includes(s)?a("el-radio-group",{model:{value:e.data[s],callback:function(t){e.$set(e.data,s,t)},expression:"data[k]"}},e._l(e.typeList[s].list,(function(e,t){return a("el-radio",{key:t,attrs:{label:e}})})),1):a("el-input",{model:{value:e.data[s],callback:function(t){e.$set(e.data,s,t)},expression:"data[k]"}}),a("el-popover",{attrs:{placement:"top",width:"300",trigger:"hover"}},[a("p",[e._v(" 与邮箱一致的通行码, 在邮箱设置开启SMTP服务器可获取（邮件通知必填） ")]),"emailPass"==s?a("span",{staticClass:"email-pass",attrs:{slot:"reference"},slot:"reference"},[e._v("(view)")]):e._e()])],1)}))],2)},A=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("h2",{staticClass:"tit"},[e._v("网站信息")])])}],E={name:"Base",components:{Upload:p},props:["data"],data(){return{list:{adminAvatar:"管理员头像",adminName:"管理员昵称",websiteName:"网站名字",websiteAddress:"网站域名",websiteDescribe:"网站描述",seo:"SEO关键词",fileUploadType:"文件上传",emailType:"邮箱类型",emailPass:"邮箱PASS"},typeList:{fileUploadType:{list:["服务器","阿里云"],"阿里云":{bucket:"bucket",region:"region",accessKeySecret:"accessKeySecret",accessKeyId:"accessKeyId",domain:"自定义文件域名，非必填"}},emailType:{list:["QQ","163"],pass:""}}}},mounted(){console.log(this.data)},methods:{uploadChange(e,t){}}},j=E,R=(a("3f7a"),Object(c["a"])(j,T,A,!1,null,"ca8ecb54",null)),B=R.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h2",{staticClass:"tit"},[e._v("其他信息")]),e._l(e.list,(function(e,t,s){return[a("el-form-item",{key:s,attrs:{label:e}},[a("el-input")],1)]}))],2)},H=[],I={name:"Other",data(){return{list:{icpNumber:"备案号",icpLink:"备案链接"}}}},M=I,N=Object(c["a"])(M,F,H,!1,null,null,null),K=N.exports,P={components:{Upload:p,CoverInfo:g,BgMusic:k,Website:O,Base:B,Other:K},data(){return{componentList:{base:B,website:O,cover:g,bgMusic:k,other:K},form:{base:{},administrator:{},cover:{},pageBgMusic:{},other:{},ossAliyun:{}},uploadFile:{},fullscreenLoading:!1}},watch:{$info:{handler(e){e&&this.init()},immediate:!0}},computed:{$info(){return this.$store.state.$data?this.$store.state.$data.info:{}}},methods:{init(){for(let e in this.$info)this.$set(this.form,e,this.$info[e]);console.log("data",this.form)},async onSubmit(){const e=this.form["base"]["fileUploadType"],t=this.form["ossAliyun"];if("阿里云"==e)for(let a in t)if("domain"!=a&&!t[a])return void this.$message.error("请填写阿里云上传模式的必填信息！");if(this.fullscreenLoading=!0,p1&&p2){const e=await this.$http.post("/password",{p1:p1,p2:p2});if(2===e.data.status)return void this.popupHint(e.data.message)}for(let a in this.uploadFile){const s=new FormData;if(s.append("type",e),s.append("file",this.uploadFile[a]),"阿里云"==e){const e=JSON.stringify(t);s.append("oss",e)}const i=await this.$http.post("/upload",s),n=i.data.body;if(1!==i.data.status)return void this.popupHint(n.message);"avatar"===a?this.form["base"]["adminAvatar"]=n.url:this.form["cover"]["image"]=n.url}this.$http.post("/info",this.form).then(e=>{this.uploadFile={},this.popupHint("success",!0),this.$store.commit("updataInfo",e.data.body),document.querySelector(".content").scrollTop=0}).catch(e=>{this.popupHint(e.message)})},popupHint(e,t){t?this.$message.success(e):this.$message.error(e),this.fullscreenLoading=!1}}},J=P,D=(a("0f60"),Object(c["a"])(J,s,i,!1,null,"6e097836",null));t["default"]=D.exports},"8b49":function(e,t,a){},da94:function(e,t,a){},e288:function(e,t,a){},f5a3:function(e,t,a){e.exports=a.p+"img/cover.b5d33f25.png"}}]);
//# sourceMappingURL=chunk-555a2ea6.2e60d920.js.map